<%# FILE DAEMON TEMPLATE %>
# Generated by Chef for <%= node['fqdn'] %>
# Local modifications will be overwritten.
#
# Bareos Client FileDaemon Configuration File

FileDaemon {
  Name = <%= node['fqdn'] %>-fd
  FDPort = <%= node['bareos']['clients']['fd_port'] %>
  Maximum Concurrent Jobs = <%= node['bareos']['clients']['max_concurrent_jobs'] %>
  Heartbeat Interval = <%= node['bareos']['clients']['heartbeat_interval'] %>
}

<% @bareos_dir.each do |director| %>
##########
# Director/Monitor Resources for <%= director['fqdn'] %> #
##########
Director {
  Name = <%= director['fqdn'] %>-dir
  Password = "<%= node['bareos']['fd_password'] %>"
}

Director {
  Name = <%= director['fqdn'] %>-mon
  Password = "<%= director['bareos']['mon_password'] %>"
  Monitor = <%= node['bareos']['storage']['sd_mon_enable'] %>
}

Messages {
  Name = <%= node['bareos']['messages']['default_messages'] %>
  director = <% director['fqdn'] %>-dir = all
}
<% end %>
