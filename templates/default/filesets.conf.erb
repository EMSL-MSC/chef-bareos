<%# BAREOS FILESET DEFINITIONS TEMPLATE %>
# Generated by Chef for <%= node['bareos']['director']['name'] %>-dir
# Local modifications will be overwritten.
#
# Bareos Pool Definition File

<% @fileset_config.each do |fileset_name, section| -%>
FileSet {
  Name = "<%= fileset_name %>-fileset"
  Include {
    Options {
      <% section['options'].each do |key1, value1| %>
      <%= key1 %> = <%= value1 %>
      <% end %>
    }
    <% section['include'].each do |key2, value2| %>
    File = <%= value2 %>
    <% end %>
    <% section['other_conf'].each do |key3, value3| %>
    <%= key3 %> = <%= value3 %>
    <% end %>
  }
  Exclude {
    <% section['exclude'].each do |key4, value4| %>
    <%= key4 %> = <%= value4 %>
    <% end %>
  }
}
<% end %>
