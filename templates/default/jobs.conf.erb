<%# BAREOS JOBS TEMPLATE %>
# Generated by Chef for <%= node['bareos']['director']['name'] %>-dir
# Local modifications will be overwritten.
#
# Bareos Jobs File

<% unless @jobs.nil? %>
  <% @jobs.each do |job_key, job_value| %>
Job {
  Name = "<%= job_key %>"
    <% job_value.each do |key, value| %>
  <%= key %> = <%= value %>
    <% end %>
}

  <% end %>
<% end %>
<% @bareos_clients.each do |client| %>
Job {
  Name = "<%= client['bareos']['clients']['name'] %>-Job"
  Client = <%= client['bareos']['clients']['name'] %>-fd
  Type = Backup
  <% @client_jobs.each do |key1,value1| %>
  <%= key1 %> = <%= value1 %>
  <% end %>
}

Job {
  Name = "<%= client['bareos']['clients']['name'] %>-Restore-Job"
  Client = <%= client['bareos']['clients']['name'] %>-fd
  Type = Restore
  <% @client_restore_jobs.each do |key2,value2| %>
  <%= key2 %> = <%= value2 %>
  <% end %>
}

<% end %>
